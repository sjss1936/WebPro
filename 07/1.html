<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Ìï† Ïùº Î™©Î°ù + Doughnut Ï∞®Ìä∏ Ïó∞Îèô</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding-top: 30px;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
      letter-spacing: 1px;
    }
    #todo {
      padding: 10px 15px;
      border-radius: 25px;
      border: none;
      outline: none;
      width: 250px;
      margin-right: 10px;
      font-size: 1rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    #add-button {
      padding: 10px 20px;
      border: none;
      border-radius: 25px;
      background: linear-gradient(45deg, #00c6ff, #0072ff);
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    #add-button:hover {
      box-shadow: 0 0 15px #00c6ff, 0 0 25px #0072ff;
      transform: scale(1.05);
    }
    #todo-list {
      margin-top: 30px;
      width: 300px;
    }
    .todo-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      transition: background 0.3s;
    }
    .todo-item.checked {
      background: rgba(0, 200, 255, 0.2);
      text-decoration: line-through;
    }
    .todo-item span {
      flex: 1;
      margin-left: 10px;
    }
    .todo-item button {
      border: none;
      background: crimson;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.2s;
    }
    .todo-item button:hover {
      background: darkred;
    }
    .chart-container {
      margin-top: 50px;
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <h1>üöÄ Ìï† Ïùº Î™©Î°ù & ÎèÑÎÑõ Ï∞®Ìä∏</h1>
  <div>
    <input id="todo" placeholder="Ìï† ÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" />
    <button id="add-button">Ï∂îÍ∞Ä</button>
  </div>
  <div id="todo-list"></div>

  <div class="chart-container">
    <canvas id="myChart" width="300" height="300"></canvas>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const input = document.querySelector('#todo');
      const todoList = document.querySelector('#todo-list');
      const addButton = document.querySelector('#add-button');

      // ÏÉâÏÉÅ ÌåîÎ†àÌä∏ (ÌïÑÏöî Ïãú ÎäòÎ†§ÎèÑ Îê®)
      const colors = [
        '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
        '#FF9F40', '#FFCD56', '#C9CBCF', '#36A2EB', '#00C49F'
      ];

      // Ï∞®Ìä∏ Ï¥àÍ∏∞Ìôî
      const ctx = document.getElementById('myChart').getContext('2d');
      const myChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: [],
          datasets: [{
            label: 'Ìï† Ïùº Îç∞Ïù¥ÌÑ∞',
            data: [],
            backgroundColor: [],
            borderWidth: 1,
          }],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
              labels: { color: 'white' },
            },
            title: {
              display: true,
              text: 'Ìï† Ïùº ÏÉÅÌÉú ÎèÑÎÑõ Ï∞®Ìä∏',
              color: 'white',
            },
          },
        },
      });

      // Ìï† Ïùº Ï∂îÍ∞Ä Ìï®Ïàò
      const addTodo = () => {
        const value = input.value.trim();
        if (!value) {
          alert('Ìï† ÏùºÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
          return;
        }

        // DOM ÏÉùÏÑ±
        const item = document.createElement('div');
        item.classList.add('todo-item');

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';

        const text = document.createElement('span');
        text.textContent = value;

        const button = document.createElement('button');
        button.textContent = 'ÏÇ≠Ï†ú';

        // Ï≤¥ÌÅ¨Î∞ïÏä§ Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏ (ÏôÑÎ£å Ï≤¥ÌÅ¨)
        checkbox.addEventListener('change', () => {
          item.classList.toggle('checked', checkbox.checked);
          // ÌïÑÏöîÏãú Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ Í∞ÄÎä•
        });

        // ÏÇ≠Ï†ú Ïù¥Î≤§Ìä∏ (Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ÎèÑ ÏÇ≠Ï†ú)
        button.addEventListener('click', () => {
          // ÏÇ≠Ï†úÌï† Ïù∏Îç±Ïä§ Ï∞æÍ∏∞
          const idx = Array.from(todoList.children).indexOf(item);
          if (idx > -1) {
            // Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Ï†úÍ±∞
            myChart.data.labels.splice(idx, 1);
            myChart.data.datasets[0].data.splice(idx, 1);
            myChart.data.datasets[0].backgroundColor.splice(idx, 1);
            myChart.update();

            // DOM Ï†úÍ±∞
            item.remove();
          }
        });

        // DOM Ï∂îÍ∞Ä
        item.appendChild(checkbox);
        item.appendChild(text);
        item.appendChild(button);
        todoList.appendChild(item);

        // Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä
        myChart.data.labels.push(value);
        myChart.data.datasets[0].data.push(1); // Í∏∞Î≥∏Í∞í 1
        // ÏÉâÏÉÅ ÏàúÌôòÌï¥ÏÑú Ìï†Îãπ
        const color = colors[myChart.data.labels.length % colors.length];
        myChart.data.datasets[0].backgroundColor.push(color);

        myChart.update();

        input.value = '';
        input.focus();
      };

      addButton.addEventListener('click', addTodo);
      input.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') addTodo();
      });
    });
  </script>
</body>
</html>
